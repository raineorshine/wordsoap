{"version":3,"sources":["/Users/raine/projects/wordsoap/src/lib.js"],"names":["_$7866","require","regexes$7867","msoAttributes","source","nbsp","conditional","htmlComments","emptyTags","repeatTags","deadTags","regexesCompiled$7870","mapValues","a$7874","RegExp","clean$7873","a$7875","replace","module","exports","regexes","regexesCompiled"],"mappings":"AAAA;AAEA,IAAIA,MAAA,GAAIC,OAAA,CAAQ,QAAR,CAAR,CAFA;AAIA,IAAIC,YAAA,GAAU;AAAA,IAKbC;AAAAA;AAAAA;AAAAA,iBAAA,E,4GAA2HC,MAL9G;AAAA,IAObC,IAAA,E,sCAA4CD,MAP/B;AAAA,IAUbE;AAAAA,eAAA,E,wCAAqDF,MAVxC;AAAA,IAYbG,YAAA,E,YAA0BH,MAZb;AAAA,IAcbI,SAAA,E,uCAAkDJ,MAdrC;AAAA,IAgBbK,UAAA,E,sBAAkCL,MAhBrB;AAAA,IAkBbM,QAAA,E,oCAA8CN,MAlBjC;AAAA,CAAd,CAJA;AA2BA,IAAIO;AAAAA,oBAAA,GAAkBX,MAAA,CAAEY,SAAF,CAAYV,YAAZ,EAOJ,UAAAW,MAAA;AAAA,IAP2B,WAAIC,MAAJ,CAO3BD,MAP2B,EAAc,IAAd,EAO3B;AAAA,CAPI,CAAtB,CA3BA;AA6BA,IAAIE,UAAA,GAgEA,UAASC,MAAT,EAAY;AAAA,IAAE,OAAOA,MAAA,CA9DtBC,OA8DsB,CA9DdN,oBAAA,CAAgBR,aA8DF,EA9DiB,MA8DjB,EA7DtBc,OA6DsB,CA7DdN,oBAAA,CAAgBN,IA6DF,EA7DQ,EA6DR,EA5DtBY,OA4DsB,CA5DdN,oBAAA,CAAgBL,WA4DF,EA5De,EA4Df,EA3DtBW,OA2DsB,CA3DdN,oBAAA,CAAgBJ,YA2DF,EA3DgB,EA2DhB,EA1DtBU,OA0DsB,CA1DdN,oBAAA,CAAgBH,SA0DF,EA1Da,EA0Db,EAzDtBS,OAyDsB,CAzDdN,oBAAA,CAAgBD,QAyDF,EAzDY,EAyDZ,EAxDtBO,OAwDsB,CAxDdN,oBAAA,CAAgBF,UAwDF,EAxDc,IAwDd,EAvDtBQ,OAuDsB,CAvDd,IAAIH,MAAJ,CAAW,QAAX,EAAqB,IAArB,CAuDc,EAvDc,GAuDd,CAAP,CAAF;AAAA,CAhEhB,CA7BA;AAwCA;AAAAI,MAAA,CAAOC,OAAP,GAAiBJ,UAAjB,CAxCA;AAyCAG,MAAA,CAAOC,OAAP,CAAeC,OAAf,GAAyBlB,YAAzB,CAzCA;AA0CAgB,MAAA,CAAOC,OAAP,CAAeE,eAAf,GAAiCV,oBAAjC","file":"lib.js","sourcesContent":["'use strict'\n\nvar _ = require('lodash')\n\nvar regexes = {\n\t// Inspired by: http://tim.mackey.ie/2005/11/23/CleanenHTMLUsingRegularExpressions.aspx\n\t// msoTags: /<[\\/]?(font|span|xml|del|ins|[ovwxp]:\\w+)[^>]*?>/.source,\n\n\t// https://regex101.com/r/lJ0nQ6\n\tmsoAttributes: /<(\\w+)(?:\\s+(?:class|lang|style|size|face|xmlns:\\w+|[ovwxp\\w+]))=(?:'[^']*'|\"\"[^\"\"]*\"\"|[^\\s>]+)(?:[^>]*)>/.source,\n\n\tnbsp: /(<[^\\s>]*>&nbsp;<\\/[^\\s>]*>)|&nbsp;/.source,\n\n\t// https://regex101.com/r/sD4vJ8\n\tconditional: /<!-*\\[\\w+ [^\\]]*]>|<!\\[end[^\\]]*\\]-*>/.source,\n\n\thtmlComments: /<!--.*-->/.source,\n\n\temptyTags: /<(span|a|[ovwxp]:\\w+)[^>]*><\\/[^>]+>/.source,\n\n\trepeatTags: /(?:(<\\/?span>){2,})/.source,\n\n\tdeadTags: /<(xml|head)>[\\S\\s]*<\\/(xml|head)>/.source,\n\n}\n\n// compile the regexes\nvar regexesCompiled = _.mapValues(regexes, λ[new RegExp(#, 'gi')])\n\nvar clean = λ\n\t\t// .replace(new RegExp(r.msoTags, 'gi'), '')\n\t\t.replace(regexesCompiled.msoAttributes, '<$1>')\n\t\t.replace(regexesCompiled.nbsp, '')\n\t\t.replace(regexesCompiled.conditional, '')\n\t\t.replace(regexesCompiled.htmlComments, '')\n\t\t.replace(regexesCompiled.emptyTags, '')\n\t\t.replace(regexesCompiled.deadTags, '')\n\t\t.replace(regexesCompiled.repeatTags, '$1')\n\t\t.replace(new RegExp('&quot;', 'gi'), '\"') // regex literals break sweetjs here\n\nmodule.exports = clean\nmodule.exports.regexes = regexes\nmodule.exports.regexesCompiled = regexesCompiled\n"],"sourceRoot":"/source/"}